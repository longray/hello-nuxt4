# 项目规则库

---

## 规则 1：新示例“清盘”规则

**一句话原则**：只删代码，不碰基建。

**执行时机**: 当我理解您要开始一个新示例时，此规则将自动触发。

**核心操作**:

1.  **识别目标**: 精准识别并列出所有**业务代码**目录，包括：
    - `components/`
    - `composables/`
    - `layouts/`
    - `middleware/`
    - `pages/`
    - `plugins/`
    - `server/`
    - `stores/`

2.  **彻底删除**: 调用操作系统原生命令，对上述目录执行“斩草除根”式删除，确保文件夹及其所有内容被完全移除。
    - **执行方式**: 使用 `Remove-Item -Recurse -Force` (Windows) 或 `rm -rf` (Linux/macOS) 命令。

3.  **严格保留**: 以下**项目基建**目录和文件**必须保留**，不受任何影响：
    - **框架相关**: `.nuxt/`, `node_modules/`, `pnpm-lock.yaml`
    - **静态资源**: `assets/`, `public/`
    - **项目配置**: `nuxt.config.ts`, `package.json`, 等所有配置文件。
    - **项目管理**: `.git/`, `.ai_memory/`, 等所有隐藏的管理目录。

**最终目标**: 每次清盘后，项目恢复到一个仅包含“基础设施”的纯净状态，为新示例的开发扫清障碍。

---

## 规则 2：示例验证与问题追踪规则

**一句话原则**：凡有产出，必有验证；凡有问题，必有记录。

**执行时机**: 当我完成一个示例的所有编码任务后，此规则自动触发。

**核心流程**:

1.  **我 (AI) - 请求验证**: 我会明确告知您示例已完成，并请求您进行手动验证。

2.  **您 (用户) - 手动验证**: 您根据示例目标，启动开发服务器 (`pnpm dev`) 或执行相关操作，在浏览器或终端中检查实际运行结果是否符合预期。

3.  **您 (用户) - 反馈结果**: 您向我反馈验证结果，只有两种标准回复：
    - **`"验证成功"`**: 如果功能符合预期。
    - **`"验证失败"`**: 如果功能不符合预期，请附上**问题描述**（例如：期望看到什么，实际发生了什么，报错信息截图等）。

4.  **我 (AI) - 处理反馈**:
    - **对于“验证成功”**: 我将确认并清空当前任务列表，等待您的下一个指令。
    - **对于“验证失败”**:\
        - 我将生成一个唯一的 `issueId`。\
        - 使用 `mcp_MongoDB_insert_many` 工具，在 `nuxt4` 数据库的 `issues` 集合中创建一个新的文档。\
        - 该文档将至少包含 `issueId`、您提供的 `问题描述`、`相关代码快照`、`时间戳`，并标记 `verified: false`。\
        - 我将基于这条新生成的 `issue` 记录，开始进行分析和调试。

**最终目标**: 建立一个从开发、测试、反馈到问题修复和知识沉淀的完整闭环，确保我们的经验库（`issues` 集合）越来越有价值。

---

## 规则 3：任务计划与执行规则

**一句话原则**：谋定而后动，行而有方，事毕有沉淀。

**执行时机**: 在每个新的 Nuxt 示例或主题开始时，此规则自动触发。

**核心流程**:

1.  **我 (AI) - 生成计划**: 基于您的新需求，我将使用标准模板在 `.ai_memory/task.md` 文件中生成一份详细的任务计划。计划内容将包括：
    - **回顾**：总结上一个计划的成果与关联的 Issues。
    - **当前**：明确本次计划的**核心目标**、关联的**知识库文档**，以及一份详细的、可勾选的**任务清单**。
    - **展望**：预留下一个计划的方向。

2.  **您 (用户) - 确认计划**: 您审阅并确认任务计划。一旦确认，此计划将成为我们本次行动的“唯一剧本”，原则上不再中途更改。

3.  **我 (AI) - 执行与汇报**: 我将严格按照 `task.md` 中的任务清单，逐项执行。
    - 每完成一项，我会更新该项的状态为 `[x]`，并附上**结果总结、验证方式和关联Issue ID**。
    - 如果在“规则2”的验证环节中失败，我会将任务标记为 `[!]`，并立即启动**问题处理子流程**（记录到MongoDB，创建修复子任务等）。

4.  **我 (AI) - 总结与归档**:
    - 当所有任务（包括所有问题修复子任务）都标记为 `[x]` 后，我将向您提交一份完整的“**当前计划总结报告**”。
    - 报告将回顾目标的完成情况，并汇总本次计划中所有“新增/已更新”的 `issues` 清单。
    - 最后，我会执行“规则1：清盘”，为下一个计划做准备。

**最终目标**: 将每一次学习探索都结构化、流程化，确保我们不仅完成任务，更能高效地构建、追踪、解决问题，并最终将所有经验转化为可复用的知识资产。