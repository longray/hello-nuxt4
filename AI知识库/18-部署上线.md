# Nuxt4 部署上线：让你的"星际飞船"翱翔太空

经过漫长的开发、调试和优化，你的 Nuxt 应用终于准备好了。现在，是时候让这艘"星际飞船"离开"船坞"（本地开发环境），驶向浩瀚的互联网太空了。让我们一起探索如何将你的应用成功部署到生产环境。

## 部署模式：选择你的"飞行模式"

Nuxt4 提供了三种主要的部署模式，就像飞船有不同的飞行模式一样。每种模式都有其独特的优势和适用场景。

### 1. 静态站点生成 (SSG) - "探测器"模式

*   **比喻：** 这就像发射一个探测器。在发射前，你就把所有可能需要的数据和页面都准备好了。探测器发射后，它可以完全自主运行，不需要持续的地面支持。

*   **工作原理：**
    ```bash
    # 生成静态站点
    npx nuxi generate
    ```
    这个命令会：
    1.  预先渲染所有页面为 HTML 文件。
    2.  提取所有必要的 JavaScript 和 CSS。
    3.  将所有资源打包到 `.output/public` 目录。

*   **优点：**
    *   超快的页面加载速度（因为都是静态 HTML）。
    *   极低的服务器成本（可以部署到 CDN）。
    *   最佳的 SEO 表现。

*   **适用场景：**
    *   博客、文档网站。
    *   营销页面。
    *   不需要实时数据的网站。

### 2. 服务端渲染 (SSR) - "母舰"模式

*   **比喻：** 这就像一艘功能完备的母舰。它需要一个持续运行的"引擎"（Node.js 服务器），但能够实时处理各种复杂的任务和数据交互。

*   **工作原理：**
    ```bash
    # 构建生产版本
    npx nuxi build
    
    # 启动服务器
    node .output/server/index.mjs
    ```

*   **优点：**
    *   完美的动态数据支持。
    *   出色的 SEO。
    *   更好的安全性（敏感数据可以保留在服务器）。

*   **适用场景：**
    *   电商网站。
    *   社交应用。
    *   需要实时数据的仪表盘。

### 3. 混合渲染 - "变形金刚"模式

*   **比喻：** 就像一艘能根据需要变形的飞船。有些区域采用静态生成（像探测器），有些区域使用服务端渲染（像母舰）。

*   **工作原理：** 通过路由规则来定义不同页面的渲染模式。

    ```typescript
    // nuxt.config.ts
    export default defineNuxtConfig({
      routeRules: {
        // 博客文章使用静态生成
        '/blog/**': { static: true },
        // 用户资料页使用服务端渲染
        '/profile/**': { ssr: true }
      }
    })
    ```

## 部署目标："停泊港"的选择

### 1. Vercel - "太空港"

*   **特点：** 对 Nuxt 支持极其友好，自动识别并优化部署配置。
*   **部署步骤：**
    1.  将代码推送到 GitHub。
    2.  在 Vercel 导入项目。
    3.  Vercel 会自动识别这是一个 Nuxt 项目并完成部署。

### 2. Netlify - "星际基地"

*   **特点：** 提供强大的 CI/CD 和边缘计算功能。
*   **部署步骤：**
    1.  创建 `netlify.toml` 配置文件：
        ```toml
        [build]
          command = "npx nuxi build"
          publish = ".output/public"
        ```
    2.  连接 GitHub 仓库。
    3.  配置构建设置。

### 3. 传统服务器 - "自建空间站"

*   **步骤：**
    1.  在服务器上安装 Node.js。
    2.  使用 PM2 管理进程：
        ```bash
        # 安装 PM2
        npm install -g pm2
        
        # 启动应用
        pm2 start .output/server/index.mjs --name "nuxt-app"
        
        # 配置开机自启
        pm2 startup
        pm2 save
        ```

## 部署检查清单

在你的"飞船"正式起航前，请检查以下要点：

1.  **环境变量：**
    *   所有必要的环境变量都已配置。
    *   敏感信息已妥善保护。

2.  **性能优化：**
    *   图片已优化。
    *   代码已压缩。
    *   缓存策略已配置。

3.  **安全检查：**
    *   API 密钥已隐藏。
    *   CORS 策略已配置。
    *   HTTP 头部安全已设置。

4.  **监控告警：**
    *   错误跟踪已配置。
    *   性能监控已部署。
    *   日志系统已就绪。

---

部署是一个应用生命周期中的关键时刻。选择合适的部署模式和平台，做好充分的准备和检查，你的 Nuxt "星际飞船"就能稳稳地翱翔在互联网的星空中，为用户提供流畅而愉悦的访问体验。